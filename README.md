## Mouse store KELOT
 職業訓練校の卒業制作としてチームで制作を行った架空のWebサイトです。  
 <br>
 
## 制作期間
 約1か月  
 <br>
 
## メンバーについて
 自身を含む計３名  
 
 * 自：DB設計、フィルター検索、管理者用ページのポイント設定、配送料設定、税率設定を主に担当  
 * A：デザイン、CSS/Javascript実装、商品一覧ページ、購入処理等を担当  
 * B：管理者用ページの商品管理、顧客管理、注文管理等を担当
 <br>

## 制作の流れ
 1. 講師の提示する、基本的な機能（ログイン・ログアウト、商品一覧、お気に入り登録、購入、購入履歴表示）を実装した仮のページとDBを製作。（他チームもほぼ同様のものを製作する） 
 ↓ 
 2. チーム内で、実装したい機能、参考にするwebサイトなどを話しあい、実際に制作するものを決定する 
 ↓ 
 3. DBを再設計 
 ↓ 
 4. HTML/CSS/Javascript/PHPで、実際に表示する内容を制作 
 ↓ 
 5. 不具合修正 
 ↓ 
 6. 完成  
<br>

## 各流れでの自身の担当について
 1.  DB設計、商品一覧表示、購入処理、購入履歴表示部分を制作 
 2. 詳細な検索フォーム実装、ポイント付与、配送先ごとの配送料設定、管理者ページを用意し各設定を変更できる機能を提案 
 3. ごく一部を除きすべて設計 
 4. Aのデザイン制作に時間がかかるため、Bと分担しつつ先行して各ページを制作 
 　その後、AのデザインとCSSを製作しておいた各ページに適用 
 　また途中でDB設計に変更の必要が生じたため対応(point,postage関連部分) 
 5. メンバー全員で各ページをテストし、発見した不具合の修正を行う 
 　各ページの動作を自身が理解していたため、修正内容の指示を各メンバーに行う 
 　自身は修正が難解な箇所を担当する  
 <br>

## 工夫点や難しかったこと、反省点  
### 1での購入履歴の管理
　税率変更を考慮し、また各消費税ごとの税合計表示のためのDB設計と、実際に画面上に表示させるためのプログラム実装が難解だった。   
 
　商品ごとに適用される消費税率を設定するところから修正する必要があり、その後各購入明細の消費税率毎に税額を集計し、さらにその合計を保存、と行うべき操作が多く、テーブルのリレーションやプログラムの実行順序を工夫した。 
 
### フィルター検索フォームの実装
　レンジスライダーでの各数値検索や、検索項目の表示をどうやって表示するか、どう実装するかを悩んだ。  
　検索結果を表示は非同期で実装することも考えたが、経験がなく制作期間の限りもあったため、POSTした値をPHPで処理することにした。  
 
　検索項目はproductテーブルの販売中か否かを判別するon_saleカラムから、販売中のもののデータをSQLで取り出しその要素をfetchAllしたものをforeachで表示した。  
 
　どの項目をフィルター検索上に表示するかを管理者用ページから設定できるようにしたかったが、DBにテーブル追加するところから追加制作が必要だったため、制作期間を鑑み断念。  
 
　レンジスライダーでの数値検索は下記のQiita記事が非常に勉強になった。2つのスライダーを重ねることで、上限と下限の2つのthumbをもつレンジスライダーを実現できる。  
 
　https://qiita.com/paprinco/items/eb23030ee149bb89a5af  
 
### 付与ポイント設定
　購入金額に対して常時付与される基本ポイントと、特定の商品にのみプラスして付与される特別ポイントの設定を行いたかった。  
 
　特別ポイントを管理するために、ポイントキャンペーンとして対象の期間と対象商品を設定し、現在日時から適用されているキャンペーンをsessionに保存して、各商品のポイント表示に反映させる。  
 
　ポイント表示箇所がいくつかあり、それらを漏れがないように設定することが大変でした。  
 
　また、ポイントキャンペーンの対象商品設定について、CSSの設定をもう少し工夫できたことと、まだそのキャンペーンに登録されていない商品を一覧表示するため、商品数が増えるごとに見づらい欠陥もあるので、こちらにも検索フォームを実装するべきでした。  
 
### 不具合修正
　他メンバーが制作したページの修正を行う際に、人により記述方法が異なり、また他メンバーはAI生成で制作した箇所も多く、当人も動作内容を理解していない箇所があったため、読解に多くの時間を要した。  
 
　使用するfunctionや関数名などは、チーム内で都度共有を行うべきでした。  

